<!DOCTYPE html>

<head>
  <title>Tester</title>
  <link rel="canonical" href="https://3lucasz.github.io/ClientServerTesters/" />
  <link rel="manifest" href="/ClientServerTesters/manifest.json" />
  <link rel="apple-touch-icon" href="images/icons/icon-256x256.png" />
</head>

<body>
  <h1>Tester</h1>
  <li><a href="pages/websocket_client.html">Websocket Client</a></li>
  <li><a href="pages/storage_client.html">Storage Client</a></li>
  <h3>Logs</h3>
  <div id="logs"></div>
</body>

<script language="javascript" type="text/javascript">
  var logsDiv = document.getElementById("logs");

  if (window.matchMedia("(display-mode: standalone)").matches) {
    log("This is running as a PWA.", logsDiv);
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", function () {
        navigator.serviceWorker
          .register("/ClientServerTesters/serviceWorker.js", {
            scope: "/ClientServerTesters/",
          })
          .then((res) => console.log("service worker registered"))
          .catch((err) => console.log("service worker not registered", err));
      });
    }
  } else {
    log("This is running as a website", logsDiv);
  }

  function log(message, div) {
    var pre = document.createElement("p");
    pre.innerHTML = message;
    div.appendChild(pre);
  }
</script>
